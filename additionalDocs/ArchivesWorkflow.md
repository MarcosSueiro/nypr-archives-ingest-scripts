# INTRODUCTION

Since about 2016, the New York Public Radio (NYPR) Archive uses a workflow for audio-file ingestion that uses at its core the generation of a &quot;golden record&quot; which combines data from several sources. The process usually starts with adding the files to be ingested to a Windows folder. The files are then processed via a combination of software and xslt scripts, which generate xml documents to ingest into the Archives&#39; systems.

# OVERVIEW

The workflow accepts metadata from Broadcast WAV files as an xml RDF document. It then generates a new set of metadata as a &quot;golden record&quot; xml RDF document, taking into account the following possible sources:

## INPUTS

1. Embedded metadata
  1. Parseable filename or BEXT Description
  2. LIST chunk
  3. BEXT chunk
  4. Technical metadata
  5. XMP metadata
2. NYPR sources
  1. &quot;Cavafy&quot; Archives catalog
  2. DAVID System
  3. Publisher (NYPR&#39;s web publishing system)
  4. NewsBoss (yearly)
3. External sources
  1. Library of Congress (id.loc.gov)
  2. AAPB data (https://americanarchive.org/)

**MASTER OUTPUT DOCUMENT**

The new set of metadata is an xml RDF document (top level: \&lt;rdf:RDF\&gt;) in a format similar to an xml file generated by exiftool when analyzing a wav file. This master document includes at least 19 fields (listed below).

From this &quot;master file&quot;, various scripts generate xml documents to use in the following processes:

## ADDITIONAL OUTPUTS

1. BWF MetaEdit (top level: \&lt;conformance\_point\_document\&gt;)
2. DAVID (top level: \&lt;ENTRIES\&gt;) (file extension: .DBX)
3. Cavafy (top level: \&lt;pbcoreCollection\&gt;)
4. Html promotional document
5. BWF MetaEdit (top level: rdf:RDF) (extension: .xmp)(to be implemented)
6. Complete log
7. Error log

![](RackMultipart20210128-4-1s74cd4_html_3fc8c019c89d8b4c.gif)

INPUTS

![](RackMultipart20210128-4-1s74cd4_html_def0ae0444eba725.gif) ![](RackMultipart20210128-4-1s74cd4_html_def0ae0444eba725.gif) ![](RackMultipart20210128-4-1s74cd4_html_def0ae0444eba725.gif)

External MD loc.gov

americanarchive

Embedded MD Filename

LIST

BEXT

Tech MD

xmp

NYPR Data &quot;Cavafy&quot;

D.A.V.I.D.

Publisher (CMS)

NewsBoss

#

# ![](RackMultipart20210128-4-1s74cd4_html_aed858118b524a89.gif) ![](RackMultipart20210128-4-1s74cd4_html_5a9a41f5e10fc247.gif) ![](RackMultipart20210128-4-1s74cd4_html_b94062ef045454e1.gif)

![](RackMultipart20210128-4-1s74cd4_html_6ed188ce3edc0467.gif)

Master RDF Filename

LIST

BEXT

Tech MD

xmp

![](RackMultipart20210128-4-1s74cd4_html_c9fcde530b379f57.gif) ![](RackMultipart20210128-4-1s74cd4_html_5373f917fcfdf652.gif) ![](RackMultipart20210128-4-1s74cd4_html_7d2060d2b1b055b5.gif) ![](RackMultipart20210128-4-1s74cd4_html_d2169ef120f8d2f2.gif) ![](RackMultipart20210128-4-1s74cd4_html_49de46f4be364200.gif) ![](RackMultipart20210128-4-1s74cd4_html_8f24e98e6639e0ec.gif)

![](RackMultipart20210128-4-1s74cd4_html_47a3b8367360377b.gif)

 OUTPUTS

# SOFTWARE USED

## Exiftool

Exiftool (https://exiftool.org/) appears to read the most metadata from wav (and many other types of) files. The command we use is:

_exiftool –X –a –ext wav &quot;your drive/directory/files.wav&quot;_

## BWF MetaEdit

BWF MetaEdit can read and write metadata from wav files. See https://mediaarea.net/BWFMetaEdit

## OxYgen/Saxon

OxYgen can implement xml transformations and generate new documents. See [https://www.oxygenxml.com/](https://www.oxygenxml.com/), http://saxon.sourceforge.net/

## Adobe Audition

This sound editing software includes a good metadata window. See https://www.adobe.com/products/audition.html

# THE PROCESS

The Archives catalog (&quot;cavafy&quot;, [https://cavafy.wnyc.org](https://cavafy.wnyc.org/)) uses the pbcore standard, which differentiates between conceptual &quot;assets&quot; and their associated &quot;instantiations&quot; (recordings).

Generally, the ingestion of new digital audio files follows the following steps:

1. New assets are identified (e.g. a donation of new tapes)
2. Archives personnel creates new cavafy assets with at least the following two fields either manually or via spreadsheet (recommended):

- Collection name (e.g. WNYC, MUNI...)
- Unique asset number

It is usually advisable to add as many additional fields as possible from the information at hand.

1. The transfer technician generates audio files according to the Archives naming convention, namely
 COLL-SERIES-YYYY-MM-DD-12345.ext[Free text].wav
 (see below)
2. Using BWF MetaEdit, the transfer technician embeds additional metadata in the audio file. At a minimum:
  1. Medium (IMED)
  2. Technician (ITCH)

Encouraged:

  1. Source (ISRC) (cavafy catalog URL)

The following fields will also need to be present either embedded or in cavafy:

  1. Title
  2. Description (abstract/subject)
  3. One Library of Congress subject heading (keyword)
1. Archives personnel creates an rdf file via exiftool
2. The rdf file runs through an xslt transform, which generates several xml and html files
3. Metadata is embedded in the wav file via BWF MetaEdit
4. Files are uploaded to DAVID through a .DBX file
5. Files are added to cavafy through a pbcore file

# INPUTS

## Filename

The NYPR Archives naming convention is as follows:

COLL-SERIES-YYYY-MM-DD-12345.ext[Free text].wav

Where

- COLL: Collection name (e.g. MUNI, WNYC…)
- SERIES: Series acronym (e.g. OTM, BLSH…)
 YYYY-MM-DD: significant earliest date (e.g. 1978-12-03); unknown numbers are replaced with &#39;u&#39; (e.g. 1978-12-uu means &#39;sometime on December 1978&#39;)
- 12345: cavafy asset number
- ext: Instantiation suffix, where each instantiation within an asset has a unique extension. Parts are designated with letters (e.g. .1a, .1b…)
- [Free text]: An optional free text that may include information about :
  - ther IDs (e.g. LT6978 for MUNI)
  - generation information (first two may be combined):

- WEB EDIT: file to be published
- SEGMENT: partial file
- ACLIP: short promotional &quot;hot tape&quot;

  - Descriptive information

## LIST chunk

ASCII-encoded fields, as expressed by Exiftool in xml. See &quot;Master Output Document&quot; below. See also [https://www.recordingblogs.com/wiki/list-chunk-of-a-wave-file](https://www.recordingblogs.com/wiki/list-chunk-of-a-wave-file)

## BEXT chunk

ASCII-encoded fields, as expressed by Exiftool in xml. See &quot;Master Output Document&quot; below. See also
[http://www.digitizationguidelines.gov/audio-visual/documents/btext.html](http://www.digitizationguidelines.gov/audio-visual/documents/btext.html)

## Technical metadata

Exiftool can extract technical metadata as one document along with the other chunks. See [http://www.digitizationguidelines.gov/audio-visual/documents/tech\_view.html](http://www.digitizationguidelines.gov/audio-visual/documents/tech_view.html)

## XMP metadata

Exiftool can extract XMP metadata, ISO standard16684, as one document along with the other chunks. See [https://www.adobe.com/products/xmp.html](https://www.adobe.com/products/xmp.html)

## &quot;Cavafy&quot; Archives catalog

A pbcore-based, MySQL database that allows UTF-8 xml output of its metadata via a limited RESTful API. Connected to wav files via the asset/instantiation number in the filename. See [https://cavafy.wnyc.org/login](https://cavafy.wnyc.org/login)

## DAVID System

NYPR&#39;s scheduling system, developed by DAVID Systems GmbH. Allows ISO-8859 xml output of individual files with a &#39;.DBX&#39; extension. See https://www.davidsystems.com/

## Publisher

NYPR&#39;s web publishing system allows json output of result sets via a RESTful API. May connect to wav files in DAVID via the &quot;theme&quot; (aka &quot;MOTIVE&quot;) field. See https://github.com/nypublicradio/wnyc-web-client

## NewsBoss

Text-prompting software used by NYPR. Connects to WAV files via the &quot;theme&quot; (aka &quot;MOTIVE&quot;) field. Allows batch html output of internal result sets. See https://www.newsboss.com/

## Library of Congress

Vast authority files for names and subject headings (and many others). Outputs in xml (and others). Includes limited RESTful API via SRQ. See id.loc.gov

## AAPB (American Archive of Public Media)

NYPR has several thousand files in the American Archive of Public Media; some of them include transcripts. See [https://github.com/WGBH-MLA/AAPB2#api](https://github.com/WGBH-MLA/AAPB2#api)

# THE MASTER OUTPUT DOCUMENT

The master document includes LIST and BEXT chunks in ASCII-encoded xml. Due to compatibility issues with current NYPR Systems, the NYPR Archives use the fields listed below; fields marked with an asterisk allow multiple entries.

## RIFF Chunk

| **Info ID** | **The corresponding text describes** |
| --- | --- |
| IARL | The location where the subject of the file is archived |
| IART\* | The artist of the original subject of the file |
| ICMS\* | The name of the person or organization that commissioned the original subject of the file |
| ICMT | General comments about the file or its subject |
| ICOP | Copyright information about the file (e.g., &quot;Copyright Some Company 2011&quot;) |
| ICRD | The date the subject of the file was created (creation date) |
| IENG\* | The name of the engineer who worked on the file |
| IGNR | The genre of the subject |
| IKEY\* | A list of keywords for the file or its subject |
| IMED | Medium for the original subject of the file |
| INAM | Title of the subject of the file (name) |
| IPRD | Name of the title the subject was originally intended for |
| ISBJ | Description of the contents of the file (subject) |
| ISFT | Name of the software package used to create the file |
| ISRC | The name of the person or organization that supplied the original subject of the file |
| ISRF | The original form of the material that was digitized (source form) |
| ITCH | The name of the technician who digitized the subject file |

## BEXT Chunk:

Description

CodingHistory

## System, File, other technical MD

## XMP:

Image

Coverage (Location)

Lyrics (transcript)

# THE MASTER OUTPUT DOCUMENT FIELDS

Some fields in the master document allow for multiple entries, marked above with an asterisk\*. Multiple entries are separated by &#39; ; &#39; (space, semicolon, space).

## IARL (Archival location)

Correspondences in hierarchical order:

| Filename | &#39;US, &#39; + COLL |
| --- | --- |
| LIST | IARL |
| Cavafy | US, &#39; + pbcoreTitle[@titleType=Collection] |
| DAVID | Description: COLL |
| Publisher | Web domain |
| NewsBoss | &#39;WNYC&#39; |
| Default | &#39;US, NYPR&#39; |

## IART\* (Artists)

Merge the following that have LOC URL:

| LIST | IART ELSE
 ICMS ELSE
 IARL – &#39;US, &#39; |
| --- | --- |
| Cavafy | pbcoreContributor (asset) ELSE
 pbcoreContributor (series) |
| DAVID | PERFORMER |
| Publisher | contributors |
| NewsBoss | Creators |
| Default | &#39;http://id.loc.gov/authorities/names/n81047053&#39; |

## ICMS\* (Commissioned by)

Merge the following that have LOC URL:

| Filename | IARL |
| --- | --- |
| LIST | IART |
| Cavafy | pbcoreCreator, pbcorePublisher (asset) ELSE
 pbcoreCreator , pbcorePublisher (series) |
| DAVID | Description: COLL |
| Publisher | Creators, Producing Organizations ELSE Creators |
| NewsBoss | Writer |
| Default | IART ELSE
 &#39;http://id.loc.gov/authorities/names/n81047053&#39; |

## ICMT (Comments)

Merge the following:

| LIST | ICMT |
| --- | --- |
| Cavafy | pbcoreAnnotation |
| DAVID | Notes |
| Default | [Various annotations] |

## ICOP (Copyright)

Correspondences in hierarchical order:

| LIST | ICOP |
| --- | --- |
| Cavafy | copyrightInfo |
| DAVID | Description: COLL |
| Publisher | Audio may download, audio may embed ELSE
 Web domain |
| Filename | COLL |
| NewsBoss | &#39;WNYC&#39; |
| Default | COLL |

## ICRD (Create date)

Choose the earlier one of:

| Filename | YYYY-MM-DD |
| --- | --- |
| LIST | ICRD |
| Cavafy | pbcoreDate |
| DAVID | DATE |
| Publisher | newsdate |
| NewsBoss | date |
| Default | &#39;1901-01-01&#39; |

## IENG\* (Original engineer)

Merge:

| LIST | IENG |
| --- | --- |
| Cavafy | pbcoreContributor[@contributorType=&#39;\*engineer&#39;] |
| DAVID | EDITOR |
| Publisher | Engineer |
| NewsBoss | Writer |
| Default | COLL + &#39; engineer&#39; |

## IGNR (Genre)

Correspondences in hierarchical order:

| LIST | IGNR |
| --- | --- |
| Cavafy | pbcoreGenre (ONE ONLY) |
| DAVID | SUBJECT |
| Publisher | type |
| NewsBoss | &#39;News&#39; |

## IKEY (Keywords)

Merge the following that have LOC URL:

| LIST | IKEY |
| --- | --- |
| Cavafy | pbcoreSubject |
| DAVID | KEYWORDS (reverse LOC lookup) |
| Publisher | tags |

## IMED (Original medium)

Correspondences in hierarchical order:

| Filename | MEDIUM |
| --- | --- |
| LIST | IMED |
| Cavafy | pbcoreAnnotation[@annotationType=Provenance] |
| DAVID | SOURCE |
| Default | COLL + &#39; audio material&#39; |

## INAM (Title)

Correspondences in hierarchical order:

| LIST | INAM |
| --- | --- |
| Cavafy | pbcoreTitle[@titleType=Episode] |
| DAVID | GENERICTITLE |
| Publisher | title |
| NewsBoss | Filename |
| Filename | [Free text] |

## IPRD (Product)

Correspondences in hierarchical order:

| Filename | SERIES |
| --- | --- |
| Cavafy | pbcoreTitle[@titleType=Series] |
| LIST | IPRD |
| DAVID | PROGRAM |
| Publisher | Show |
| NewsBoss | &#39;News&#39; |

## ISBJ (Description)

Correspondences in hierarchical order:

| Cavafy | pbcoreDescription[@descriptionType=Abstract] |
| --- | --- |
| LIST | ISBJ |
| Publisher | body |
| DAVID | Notes (partial) |
| NewsBoss | [body] |
| Default | INAM + &#39; on &#39; + IPRD + &#39; on &#39; + ICRD |

## ISFT (Software)

Correspondences in hierarchical order:

| LIST | ISFT |
| --- | --- |
| DAVID | Description (D.A.V.I.D GmBH…) |
| Default | &#39;Unknown software&#39; |

## ISRC (Source)

Correspondences in hierarchical order:

| Cavafy | &#39;cavafy.wnyc.org/asset/&#39; + pbcoreIdentifier[@identifierType=cavafyUUID] |
| --- | --- |
| LIST | ISRC |
| Publisher | URL |
| DAVID | CATALOG |

## ISRF (Source form)

Correspondences in hierarchical order:

| Filename | &#39;US, &#39; + COLL |
| --- | --- |
| LIST | ISRF |
| Cavafy | pbcoreAnnotation[@annotationType=Provenance] |
| Default | &#39;Transfer from &#39; + IMED |

## ITCH\* (Transfer technician)

Merge:

| LIST | ITCH |
| --- | --- |
| Cavafy | pbcoreContributor[@contributorType=&#39;\*engineer&#39;] |
| DAVID | EDITOR ELSE AUTHOR |
| Publisher | Engineer |
| Default | &#39;Unknown transfer technician&#39; |