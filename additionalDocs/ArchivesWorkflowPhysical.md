# INGESTING PHYSICAL ITEMS

Ingesting physical items (tapes, discs, prints, etc.) benefits from a spreadsheet inventory. Once you determine which items you want to keep, the cataloging process is iterative and follows the following steps:

1. Segregate by format
2. Organise by collection and series, then by date
3. Identify related assets in cavafy
4. Group related items
5. Enter descriptive metadata
6. Ingest into catalog

## 1. Segregate by format

Use ample space and segregate your materials by format

## 2. Organise items

1. Segregate by collection
2. Segregate by series
3. Place in date order, when possible (unknown dates at end)

## 3. Identify related assets in cavafy

The Archives catalog (colloquially known as &quot;[cavafy](https://cavafy.wnyc.org/)&quot;) uses the [pbcore](https://pbcore.org/) standard, which differentiates between conceptual &quot;assets&quot; and their associated &quot;instantiations&quot; (recordings). Look in the archives catalog for related assets. You can use dates (in the YYYY-MM-DD format), series or keywords.

If you find a related asset in cavafy, apply a label with an instantiation ID. The ID must follow this pattern: assetID.instSuffix

The instantiation suffix will be the next integer after the current instantiations listed in cavafy. E.g., if the highest instantation ID in cavafy is 12345.2, the instantiation suffix will be 3, so the complete instantiation ID will be 12345.3.

Add an additional segment suffix (a, b, c...) for partial instantiations designed to play sequentially (for example, first hour of a two-hour show).

    Examples of instantiation IDs
    12345.3
    45678.7a

See [instantiation IDs](https://github.com/MarcosSueiro/nypr-archives-ingest-scripts/blob/master/additionalDocs/fileNaming.md#instantiation-id) for more information.

The workflow accepts metadata from Broadcast WAV files as an xml RDF document. (Other sources such as those from BWF MetaEdit or MediaInfo are first converted to an exiftool-like RDF) It then generates a new set of metadata as a &quot;golden record&quot; xml RDF document, taking into account the following possible sources:

## INPUTS

1. Embedded metadata
  1. Parseable filename or BEXT Description
  2. LIST chunk
  3. BEXT chunk
  4. Technical metadata
  5. XMP metadata
2. NYPR sources
  1. "Cavafy" Archives catalog
  2. [DAVID System](https://www.davidsystems.com/)
  3. Publisher (NYPR&#39;s web publishing system)
  4. [NewsBoss](https://www.newsboss.com/) (yearly/sporadically)
3. External sources
  1. [Library of Congress](http://id.loc.gov)
  2. [American Archive of Public Media](https://americanarchive.org/) data 

**MASTER OUTPUT DOCUMENT**

The new set of metadata is an xml RDF document in a format similar to an xml file generated by [exiftool](https://exiftool.org/) when analyzing a wav file. This master document includes at least 19 fields (listed below).

From this &quot;master file&quot;, various scripts generate xml documents to use in the following processes:

## ADDITIONAL OUTPUTS

1. BWF MetaEdit XML (root element: conformance_point_document)
2. DAVID XML (root element: ENTRIES) (file extension: .DBX)
3. Cavafy XML (root element: pbcoreCollection)
4. Html promotional document
5. json / slack documents
6. BWF MetaEdit (root element: rdf:RDF) (extension: .xmp)(to be implemented)
7. Complete log
8. Error log

# SOFTWARE USED

## Exiftool

[Exiftool](https://exiftool.org/) appears to read the most metadata from wav (and many other types of) files into one xml document. 
The command we use is:

_exiftool -X -a -ext wav -struct -charset riff=utf8 &quot;your drive/directory/files.wav&quot;_

## BWF MetaEdit

[BWF MetaEdit](https://mediaarea.net/BWFMetaEdit) can read and write metadata from wav files.

## OxYgen

[OxYgen](https://www.oxygenxml.com/) can implement xml transformations and generate new documents.

## Saxon

[Saxon](http://saxon.sourceforge.net/) implements xml transformations. It has a free "Home Edition" version.

## PowerShell

Microsoft's [PowerShell](https://learn.microsoft.com/en-us/powershell/scripting/overview?view=powershell-7.3) allows scripting and triggering of other software such as Saxon and exiftool.

## Adobe Audition

This sound editing software includes a good metadata window. See https://www.adobe.com/products/audition.html

# THE PROCESS

The Archives catalog (colloquially known as &quot;[cavafy](https://cavafy.wnyc.org/)&quot;) uses the [pbcore](https://pbcore.org/) standard, which differentiates between conceptual &quot;assets&quot; and their associated &quot;instantiations&quot; (recordings).

Generally, the ingestion of new digital audio files follows the following steps:

1. New assets are identified (e.g. a donation of new tapes)
2. Archives personnel create new cavafy assets with at least the following two fields either manually or via spreadsheet (recommended):

   - Collection name (e.g. WNYC, MUNI...)
   - Unique asset number

It is usually advisable to add as many additional fields as possible from the information at hand.

3. The transfer technician generates audio files according to the Archives naming convention, namely
 COLL-SERIES-YYYY-MM-DD-12345.ext[Free text].wav
 (see below)
4. Using BWF MetaEdit, the transfer technician embeds additional metadata in the audio file. At a minimum:
   - Medium (IMED)
   - Technician (ITCH)

     Encouraged:

   - Source (ISRC) (cavafy catalog URL)

     The following fields will also need to be present either embedded or in cavafy:

   - Title
   - Description (abstract/ISBJ)
   - One Library of Congress subject heading (IKEY)

5. Archives personnel creates an rdf file via exiftool
6. The rdf file runs through an xslt transform, which generates several xml and html files
7. Metadata is embedded in the wav file via BWF MetaEdit
8. Files are uploaded to DAVID through a .DBX file
9. Files are added to cavafy through a pbcore file




![NYPR Archives Workflow](http://www.plantuml.com/plantuml/png/NLDBR-Cs4BxFhnWubxP0T2ZGIx9Oh1ynO21Et3ZRJQ7uG8bZcJL56YJbs0ZwtykHv59U7unvVFCOVf---I1SQ6eDVg_CGJXHewCo25Dfma_0-7EsCN9gdI67l_y1_q9G8IP7J_I1VrktnrLJQ5NYYv3AujYLEtKa_suMfY8Vy4U4RBNz645gl7XQVNzTuurMrIwSISVqlLQ6CYdyZkGdR5L4UTkuakPiTiZAqHdpByNNSSEZ60ISDg8cUAWBaf8aJXxUNfFtifZFatUg3ni4AO8eX2SinL5iOqk8FKVJrXd1QXAFfVz16p1M4afnLBBVez0DTKMpR9pzbIsoMGOhBSws2UZFFb2zIKCCVVY9zJuTGQQhVkepm8QpjePn4smjWh86rdsVqcfD9OSysh0ZDxDbxFMnKw5VufcZA6COLivMp67LA4diKfphI9FmqQLGPfj889JQDX9zQ2TDbv69WpBx7DPT16DequEqBRFA7l76kiWTvV2e2YVS6UqMfzPKFE625U9Gu4rfdM72oV4xvJ2koQbIc8iqm6ulabcIL683C936y_VNJXiY0eWx39LnZv_31-6tdRN4v92emDdaBQuadCI3ixLzg8NIEQpOvZAXWMuvvZUTq0v5t9dodddas2L5h9pbB8SsiwGWcDTXzxKMvVwwUnkwPewSi-xHLZu7_eVViFJ7-ByBjMPAscbypijitfAw53wGmvRV9XoQm5Qalgd91FZ5oUsl_723R-JszclV06_uIxaFT0ftRE4TZkYaji5Q_MucF-PynuDKOGJz5p2iBNZxM56Vrty-lfjJhKVGgVyQrL0tWIsUq08lOlzv6p8Tk3KPlGiCJu9EUCu-JrzuSjoMDJk2WLI_P4vbgRSKRczPMB8RaFpOPxnQ08io5cbAHGE9fZEkOtrnh_vKFnmQ1TlN9h-l0-YXV5QlePWQFFqGaMHyX_7eOQQJPXyV9fAoOv8VytfcacPC_-Ej6IIJ6Fk-tyZ8fjR_0G00)



# INPUTS

## Filename

The NYPR Archives [naming convention](https://github.com/MarcosSueiro/nypr-archives-ingest-scripts/blob/master/additionalDocs/fileNaming.md) functions as a classification "call number".
The naming convention follows this pattern:

```   COLL-SERIES-YYYY-MM-DD-12345.ext\[Free text\].wav```

Where

- COLL: Collection name (e.g. MUNI, WNYC…)
- SERIES: Series acronym (e.g. OTM, BLSH…)
 YYYY-MM-DD: significant earliest date (e.g. 1978-12-03); unknown numbers are replaced with &#39;u&#39; (e.g. 1978-12-uu means &#39;sometime on December 1978&#39;)
- 12345: cavafy asset number
- ext: Instantiation suffix, where each instantiation within an asset has a unique extension. Parts are designated with letters (e.g. .1a, .1b…)
- [Free text]: An optional free text that may include information about :
  - other IDs (e.g. LT6978 for MUNI)
  - generation information (first two may be combined):

- WEB EDIT: file to be published
- SEGMENT: partial file
- ACLIP: short promotional &quot;hot tape&quot;

  - Descriptive information

## LIST chunk

ASCII-encoded fields, as expressed by Exiftool in xml. See &quot;Master Output Document&quot; below. See also [List chunk of a wave file](https://www.recordingblogs.com/wiki/list-chunk-of-a-wave-file)

## BEXT chunk

ASCII-encoded fields, as expressed by Exiftool in xml. See &quot;Master Output Document&quot; below. See also
[BEXT Audio Metadata Information](http://www.digitizationguidelines.gov/audio-visual/documents/btext.html)

## Technical metadata

Exiftool can extract technical metadata as one document along with the other chunks. See [BWF Tech Metadata](http://www.digitizationguidelines.gov/audio-visual/documents/tech_view.html)

## XMP metadata

Exiftool can extract XMP metadata, ISO standard16684, as one document along with the other chunks. See [Adobe XMP](https://www.adobe.com/products/xmp.html)

## &quot;Cavafy&quot; Archives catalog

A pbcore-based, MySQL database that allows UTF-8 xml output of its metadata via a limited RESTful API. Connected to wav files via the asset/instantiation number in the filename. See [NYPR Archives Catalog](https://cavafy.wnyc.org/login)

## DAVID System

NYPR&#39;s scheduling system, developed by DAVID Systems GmbH. Allows ISO-8859 xml output of individual files with a &#39;.DBX&#39; extension. See https://www.davidsystems.com/

## Publisher

NYPR&#39;s web publishing system allows json output of result sets via a RESTful API. May connect to wav files in DAVID via the &quot;theme&quot; (aka &quot;MOTIVE&quot;) field. See https://github.com/nypublicradio/wnyc-web-client

## NewsBoss

Text-prompting software used by NYPR. Connects to WAV files via the &quot;theme&quot; (aka &quot;MOTIVE&quot;) field. Allows batch html output of internal result sets. See https://www.newsboss.com/

## Library of Congress

Vast authority files for names and subject headings (and many others). Outputs in xml, rdf (and others). Includes limited RESTful API via SRQ. See id.loc.gov

## AAPB (American Archive of Public Media)

NYPR has several thousand files in the American Archive of Public Media; some of them include transcripts. See [AAPB API](https://github.com/WGBH-MLA/AAPB2#api)

# THE MASTER OUTPUT DOCUMENT

The master document includes LIST and BEXT chunks in xml. Due to compatibility issues with current NYPR Systems, the NYPR Archives use the fields listed below; fields marked with an asterisk allow multiple entries.

## RIFF Chunk

| **Info ID** | **The corresponding text describes** |
| --- | --- |
| IARL | The location where the subject of the file is archived |
| IART\* | The artist of the original subject of the file |
| ICMS\* | The name of the person or organization that commissioned the original subject of the file |
| ICMT | General comments about the file or its subject |
| ICOP | Copyright information about the file (e.g., &quot;Copyright Some Company 2011&quot;) |
| ICRD | The date the subject of the file was created (creation date) |
| IENG\* | The name of the engineer who worked on the file |
| IGNR | The genre of the subject |
| IKEY\* | A list of keywords for the file or its subject |
| IMED | Medium for the original subject of the file |
| INAM | Title of the subject of the file (name) |
| IPRD | Name of the title the subject was originally intended for |
| ISBJ | Description of the contents of the file (subject) |
| ISFT | Name of the software package used to create the file |
| ISRC | The name of the person or organization that supplied the original subject of the file |
| ISRF | The original form of the material that was digitized (source form) |
| ITCH | The name of the technician who digitized the subject file |

## BEXT Chunk:

Description

CodingHistory

## System, File, other technical MD

## XMP:

Image

Coverage (Location)

Lyrics (transcript)

# THE MASTER OUTPUT DOCUMENT FIELDS

Some fields in the master document allow for multiple entries, marked above with an asterisk\*. Multiple entries are separated by &#39; ; &#39; (space, semicolon, space).

## IARL (Archival location)

Correspondences in hierarchical order:

| Filename | COUNTRY CODE + &#39;, &#39; + COLL |
| --- | --- |
| LIST | IARL |
| Cavafy | COUNTRY CODE + &#39;, &#39; + pbcoreTitle[@titleType=Collection] |
| DAVID | Description: COLL |
| Publisher | Web domain |
| NewsBoss | &#39;WNYC&#39; |
| Default | &#39;US, NYPR&#39; |

## IART\* (Artists)

Merge the following that have LOC URL:

| LIST | IART ELSE
 ICMS ELSE
 IARL – &#39;US, &#39; |
| --- | --- |
| Cavafy | pbcoreContributor (asset) ELSE
 pbcoreContributor (series) |
| DAVID | PERFORMER |
| Publisher | contributors |
| NewsBoss | Creators |
| Default | &#39;http://id.loc.gov/authorities/names/n81047053&#39; |

## ICMS\* (Commissioned by)

Merge the following that have LOC URL:

| Filename | IARL |
| --- | --- |
| LIST | IART |
| Cavafy | pbcoreCreator, pbcorePublisher (asset) ELSE
 pbcoreCreator , pbcorePublisher (series) |
| DAVID | Description: COLL |
| Publisher | Creators, Producing Organizations ELSE Creators |
| NewsBoss | Writer |
| Default | IART ELSE
 &#39;http://id.loc.gov/authorities/names/n81047053&#39; |

## ICMT (Comments)

Merge the following:

| LIST | ICMT |
| --- | --- |
| Cavafy | pbcoreAnnotation |
| DAVID | Notes |
| Default | [Various annotations] |

## ICOP (Copyright)

Correspondences in hierarchical order:

| LIST | ICOP |
| --- | --- |
| Cavafy | copyrightInfo |
| DAVID | Description: COLL |
| Publisher | Audio may download, audio may embed ELSE
 Web domain |
| Filename | COLL |
| NewsBoss | &#39;WNYC&#39; |
| Default | COLL |

## ICRD (Create date)

Choose the earlier one of:

| Filename | YYYY-MM-DD |
| --- | --- |
| LIST | ICRD |
| Cavafy | pbcoreDate |
| DAVID | DATE |
| Publisher | newsdate |
| NewsBoss | date |
| Default | &#39;1901-01-01&#39; |

## IENG\* (Original engineer)

Merge:

| LIST | IENG |
| --- | --- |
| Cavafy | pbcoreContributor[@contributorType=&#39;\*engineer&#39;] |
| DAVID | EDITOR |
| Publisher | Engineer |
| NewsBoss | Writer |
| Default | COLL + &#39; engineer&#39; |

## IGNR (Genre)

Correspondences in hierarchical order:

| LIST | IGNR |
| --- | --- |
| Cavafy | pbcoreGenre (ONE ONLY) |
| DAVID | SUBJECT |
| Publisher | type |
| NewsBoss | &#39;News&#39; |

## IKEY (Keywords)

Merge the following that have LOC URL:

| LIST | IKEY |
| --- | --- |
| Cavafy | pbcoreSubject |
| DAVID | KEYWORDS (reverse LOC lookup) |
| Publisher | tags |

## IMED (Original medium)

Correspondences in hierarchical order:

| Filename | MEDIUM |
| --- | --- |
| LIST | IMED |
| Cavafy | pbcoreAnnotation[@annotationType=Provenance] |
| DAVID | SOURCE |
| Default | COLL + &#39; audio material&#39; |

## INAM (Title)

Correspondences in hierarchical order:

| LIST | INAM |
| --- | --- |
| Cavafy | pbcoreTitle[@titleType=Episode] |
| DAVID | GENERICTITLE |
| Publisher | title |
| NewsBoss | Filename |
| Filename | [Free text] |

## IPRD (Product)

Correspondences in hierarchical order:

| Filename | SERIES |
| --- | --- |
| Cavafy | pbcoreTitle[@titleType=Series] |
| LIST | IPRD |
| DAVID | PROGRAM |
| Publisher | Show |
| NewsBoss | &#39;News&#39; |

## ISBJ (Description)

Correspondences in hierarchical order:

| Cavafy | pbcoreDescription[@descriptionType=Abstract] |
| --- | --- |
| LIST | ISBJ |
| Publisher | body |
| DAVID | Notes (partial) |
| NewsBoss | [body] |
| Default | INAM + &#39; on &#39; + IPRD + &#39; on &#39; + ICRD |

## ISFT (Software)

Correspondences in hierarchical order:

| LIST | ISFT |
| --- | --- |
| DAVID | Description (D.A.V.I.D GmBH…) |
| Default | &#39;Unknown software&#39; |

## ISRC (Source)

Correspondences in hierarchical order:

| Cavafy | &#39;cavafy.wnyc.org/asset/&#39; + pbcoreIdentifier[@identifierType=cavafyUUID] |
| --- | --- |
| LIST | ISRC |
| Publisher | URL |
| DAVID | CATALOG |

## ISRF (Source form)

Correspondences in hierarchical order:

| Filename | &#39;US, &#39; + COLL |
| --- | --- |
| LIST | ISRF |
| Cavafy | pbcoreAnnotation[@annotationType=Provenance] |
| Default | &#39;Transfer from &#39; + IMED |

## ITCH\* (Transfer technician)

Merge:

| LIST | ITCH |
| --- | --- |
| Cavafy | pbcoreContributor[@contributorType=&#39;\*engineer&#39;] |
| DAVID | EDITOR ELSE AUTHOR |
| Publisher | Engineer |
| Default | &#39;Unknown transfer technician&#39; |
